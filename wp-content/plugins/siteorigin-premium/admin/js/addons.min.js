jQuery((function(a){a(".so-addon-banner").each((function(){var i=a(this);if(!i.find("img").length){var n=Trianglify({width:128,height:128,variance:1,cell_size:32,seed:i.data("seed")});i.append(n.svg())}})),a(".so-addon").each((function(){var n=a(this),e=n.data("id"),o=n.data("section");n.find(".so-addon-toggle-active button").on("click",(function(s){var t=a(this),d=parseInt(t.data("status"));t.prop("disabled",!0),a.post(a("#addons-list").data("action-url"),{id:e,section:o,status:d,activate_required:1},(function(e){if(t.prop("disabled",!1),d?(n.removeClass("so-addon-is-inactive").addClass("so-addon-is-active"),n.find(".so-addon-settings").show()):(n.removeClass("so-addon-is-active").addClass("so-addon-is-inactive"),n.find(".so-addon-settings").hide()),void 0!==e.action_links&&e.action_links.length){var o=n.find(".so-addon-links").empty();o.length||(o=a('<div class="so-addon-links"></div>').insertAfter(n.find(".so-addon-name"))),o.html(e.action_links.join(" | "))}if(void 0!==e.submenu_links&&e.submenu_links.length)for(i=0;i<e.submenu_links.length;++i)"enabled"==e.status?a(".toplevel_page_"+e.submenu_links[i].section+" .wp-submenu").append('<li><a href="'+e.submenu_links[i].link+'">'+e.submenu_links[i].label+"</li>"):a(".toplevel_page_"+e.submenu_links[i].section+' .wp-submenu li:contains("'+e.submenu_links[i].label+'")').remove();a(window).trigger("resize")}))}))})),a(".so-addon .so-addon-tags a").on("click",(function(i){i.preventDefault();var n=a(this);a(".addons-search").val(n.data("tag")),e()}));var n="";a(".page-sections a").on("click",(function(i){i.preventDefault(),a(".page-sections li").removeClass("active-section");var o=a(this);n=o.data("section"),o.parent("li").addClass("active-section"),e()}));var e=function(){var i=n,e=a(".addons-search").val();""===e?""===i?a(".so-addon-wrap").show():(a(".so-addon-wrap").hide(),a('.so-addon[data-section="'+n+'"]').parents().show()):a(".so-addon").each((function(){var n=a(this),o=n.find("h3").html()+" "+n.find(".so-addon-description").html();n.find(".so-addon-tags a").each((function(){o+=a(this).data("tag")+" "})),o.toLowerCase().indexOf(e)>-1&&(""===i||n.data("section")===i)?n.parent().show():n.parent().hide()})),a(window).trigger("resize")};e(),a(".addons-search").on({keyup:e,change:e,search:e}),a(window).on("resize",(function(){var i=a(".so-addon").css("height","auto"),n=[],e=0;i.each((function(i){e=(e=i/3)<0?Math.ceil(e):Math.floor(e),a(this).data("column",e),n[e]=Math.max(void 0===n[e]?0:n[e],a(this).height())})),i.each((function(){a(this).css("height",n[a(this).data("column")]+"px")}))})).trigger("resize");var o=a("#siteorigin-premium-settings-dialog"),s=a("#addons-list .so-addon-settings");s.on("click",(function(i){var n=a(this);i.preventDefault();var e=o.find(".so-content");e.empty().addClass("so-loading"),a.get(n.data("form-url")).done((function(i){e.html(i)})).fail((function(i){e.html(soPremiumAddons.settingsForm.error),console.error(i)})).always((function(){e.removeClass("so-loading")})),o.show()})),o.find(".so-close").on("click",(function(i){i.preventDefault(),o.hide()})),o.find(".so-save").on("click",(function(i){i.preventDefault();var n=a(this);n.prop("disabled",!0),s.prop("disabled",!0),o.find("form").on("submit",(function(){n.prop("disabled",!1),o.hide()})).trigger("submit")})),a("#so-premium-addon-settings-save").on("load",(function(){a("#addons-list .so-addon-settings").prop("disabled",!1)}));var t=a(".modal-video");t.find(".modal-video-close-btn").addBack().on("click",(function(){var i=t.find("iframe.active").removeClass("active");i.length&&i.data("player").pause();t.hide()})),a(document).on("keyup",(function(i){"Escape"===i.key&&t.find(".modal-video-close-btn").trigger("click")})),a(".js-modal-video").each((function(){var i,n=a(this),e=n.data("video-id"),o="https://player.vimeo.com/video/"+e+"?autoplay=0";0===(i=a("iframe#video_"+e)).length&&(i=a("<iframe >").attr({id:"video_"+e,src:o,allow:"autoplay",allowfullscreen:"1"}).appendTo(t.find(".modal-video-movie-wrap")));var s=new Vimeo.Player(i);i.data("player",s),s.on("play",(function(){i.is(":visible")||s.pause()})),n.on("click",(function(){t.find("iframe").hide(),i.show().addClass("active"),t.show(),s.play()}))})),t.show().hide()}));